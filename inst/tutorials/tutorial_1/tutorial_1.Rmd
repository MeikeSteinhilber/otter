---
title: "Tutorial 1"
tutorial:
  version: 0.1
output:
  # html_document:
  learnr::tutorial:
    language: de
    # progressive: true
    allow_skip: true
    css: css/style.css
    # highlight: espresso
    # theme: cerulean
runtime: shiny_prerendered
---

```{r setup, include=FALSE}
# library(learnr)
# library(gradethis)
# # library(studyr)
# devtools::load_all()
# knitr::opts_chunk$set(echo = FALSE)
# gradethis::gradethis_setup(
#   pass.praise = FALSE,
#   fail.encourage = FALSE,
#   pass = "Richtig!",
#   fail = "Das ist leider falsch."
#   )
# tutorial_options(exercise.reveal_solution = TRUE)

library(scales)
library(sprtt)
library(psych)
library(testthat)
library(gradethis)
library(learnr)
# devtools::load_all()
# remotes::install_github("MeikeSteinhilber/otter")
# remotes::install_github("rstudio/gradethis")
# library(otter)
knitr::opts_chunk$set(echo = FALSE)
gradethis::gradethis_setup(
  pass.praise = FALSE,
  fail.encourage = FALSE,
  pass = "Richtig!",
  code_correct = "Richtig!",
  fail = "Das ist leider falsch.",
  code_incorrect = "Das ist leider falsch."
  )
tutorial_options(exercise.reveal_solution = TRUE,
                 exercise.blanks = "___",
                 exercise.eval = TRUE)
options(
  # gradethis_glue_correct = "{ random_praise() } { .message } { .correct }",
  gradethis_glue_correct = "{ .message } { .correct }",
  # gradethis_glue_incorrect = "{ .message } { .incorrect } { random_encourage() }"
  gradethis_glue_incorrect = "{ .message } { .incorrect }"
)
blue <- "#00c4e6"
```

<!-- <a href="https://meikesteinhilber.github.io/studyr/"> <i class="fa-solid fa-house" aria-label="Link zur studyr Homepage" aria-hidden="true"></i> </a> -->

<script>
$(document).ready(function() {
  $("#tutorial-topic").prepend(`<div class="img-right">
  <a href="https://meikesteinhilber.github.io/studyr/"> <i class="fa-solid fa-house" aria-label="Link zur studyr Homepage" aria-hidden="true"></i> 
  </a> 
  </div>`);
  
  $("a[href^='#']").on("click", function(event) {
    const currentSection = $(".section.current");
    var href = $(this).attr("href");
    
    if(!$(href, currentSection).length) {
      return;
    }
    var href = href.substr(1);
    event.preventDefault();
    
    const el = document.getElementById(href);
    if(!el) {
      return;
    }
    window.scrollTo({
      top: el.offsetTop,
      left: 0,
      behavior: "smooth",
    }); 
  });
});
</script>

## Nothing

<a href="#section-test-1">Test1</a>

<a href="#section-test-2">Test2</a>

<a href="#section-topic-1">Topik 1</a>


`r otter::colorize("Aufgabe:", "var(--blue)")`
*Behebe den Fehler im Code (3 Fehler).*
```{r ex-debugging-4, exercise=TRUE, results = "hold", exercise.eval=FALSE, error=TRUE, exercise.lines = 25}
data <- data.frame(
  name = c("Peter", "Max", "Lizzy", "Mara", "Beatrice", "Klaus"),
  guthaben = c(-240, 33489, 453, 73563, -2553, 99763),
  anzahl_kredite = c(3, 0, 1, 4, 0, 1)
)
bank_status <- function(df, name) {
  guthaben <- df$guthaben[df$name = name]
  kredite <- df$anzahl_kredite[df$name = name]
  if (guthaben < 0) {
    if (kredite >= 1) {
      cat(name, "kann keinen weiteren Kredit erhalten.")
    } else{
      cat(name, "kann einen ersten Kredit erhalten.")
  } else{
    cat(name, "hat bereits", kredite, "Kredit(e) bei unserer Bank. Ein weiterer Kredit ist möglich.")
  }
  }
# Der Code ist ab hier ist korrekt!
bank_status(data, "Lizzy")
bank_status(data, "Beatrice")
bank_status(data, "Klaus")
```
```{r ex-debugging-4-check, results = "hold", exercise.eval=FALSE}
grade_this_code(
)

# grade_this({
#   pass_if_equal()
#   fail(hint = TRUE)
# })
```
```{r ex-debugging-4-solution, results = "hold", exercise.eval=FALSE}
data <- data.frame(
  name = c("Peter", "Max", "Lizzy", "Mara", "Beatrice", "Klaus"),
  guthaben = c(-240, 33489, -453, 73563, -2553, 99763),
  anzahl_kredite = c(3, 0, 1, 4, 0, 1)
)
bank_status <- function(df, name) {
  guthaben <- df$guthaben[df$name == name]
  kredite <- df$anzahl_kredite[df$name == name]
  if (guthaben < 0) {
    if (kredite >= 1) {
      cat(name, "kann keinen weiteren Kredit erhalten.\n")
    } else{
      cat(name, "kann einen ersten Kredit erhalten.\n")
    }
  } else{
    cat(name, "hat bereits", kredite, "Kredit(e) bei unserer Bank. Ein weiterer Kredit ist möglich.\n")
  }
}
bank_status(data, "Lizzy")
bank_status(data, "Beatrice")
bank_status(data, "Klaus")
```


**Hinweis:** Der korrekte Code soll diese Ausgabe haben:
```{r ex-debugging-4-example, exercise=FALSE, results = "hold",  ref.label=I('ex-debugging-4-solution')}
bank_status(data, "Lizzy")
bank_status(data, "Beatrice")
bank_status(data, "Klaus")
```














<!-- ## Topic 1 -->

<!-- Test -->

<!-- ```{r, child = "sub-tutorial-1.Rmd"} -->

<!-- ``` -->

<!-- ## Topic 2 -->

<!-- ```{r, echo=FALSE} -->
<!-- sliderInput("bins", "Number of bins:", min = 1, max = 50, value = 30) -->
<!-- plotOutput("distPlot") -->
<!-- ``` -->

<!-- ```{r, context="server"} -->
<!-- output$distPlot <- renderPlot({ -->
<!--   x <- faithful[, 2]  # Old Faithful Geyser data -->
<!--   bins <- seq(min(x), max(x), length.out = input$bins + 1) -->
<!--   hist(x, breaks = bins, col = 'darkgray', border = 'white') -->
<!-- }) -->
<!-- ``` -->

<!-- ## Topic 3 -->

<!-- Quizfragen -->

<!-- ```{r letter-a, echo=FALSE} -->
<!-- question("What number is the letter A in the English alphabet?", -->
<!--   answer("8"), -->
<!--   answer("14"), -->
<!--   answer("1", correct = TRUE), -->
<!--   answer("23") -->
<!-- ) -->
<!-- ``` -->

<!-- ```{r letter-b, echo=FALSE} -->
<!-- question("What number is the letter A in the English alphabet?", -->
<!--   answer("8"), -->
<!--   answer("14"), -->
<!--   answer("1", correct = TRUE), -->
<!--   answer("23") -->
<!-- ) -->
<!-- ``` -->

<!-- ## TOPIC 4 is a long a very long very very long long -->

<!-- ```{r code-example, exercise=FALSE, echo=TRUE, eval=FALSE} -->
<!-- open_tutorial <- function(tutorial_name) { -->
<!--   if (!is.character(tutorial)) {stop("Invalid input argument: tutorial name must be a charcter string.")} -->
<!--   # learnr::run_tutorial(tutorial, package = "studyr") -->
<!-- } -->
<!-- NULL -->
<!-- output$distPlot <- renderPlot({ -->
<!--   x <- faithful[, 2]  # Old Faithful Geyser data -->
<!--   bins <- seq(min(x), max(x), length.out = input$bins + 1) -->
<!--   hist(x, breaks = bins, col = 'darkgray', border = 'white') -->
<!-- }) -->
<!-- ``` -->

<!-- ```{r test-color, exercise=FALSE} -->
<!-- 2+3 -->
<!-- ``` -->

<!-- ## Video -->

<!-- VIDEO -->

<!-- ![](https://youtu.be/zNzZ1PfUDNk) -->

<!-- ## Exercise with Hint -->

<!-- *Here's an exercise where the chunk is pre-evaluated via the `exercise.eval` option (so the user can see the default output we'd like them to customize). We also add a "hint" to the correct solution via the chunk immediate below labeled `print-limit-hint`.* -->

<!-- Modify the following code to limit the number of rows printed to 5: -->

<!-- ```{r print-limit, exercise=TRUE, exercise.eval=TRUE} -->
<!-- mtcars -->
<!-- ``` -->

<!-- ```{r print-limit-hint} -->
<!-- head(mtcars) -->
<!-- ``` -->

<!-- ## Quiz -->

<!-- *You can include any number of single or multiple choice questions as a quiz. Use the `question` function to define a question and the `quiz` function for grouping multiple questions together.* -->

<!-- Some questions to verify that you understand the purposes of various base and recommended R packages: -->

<!-- ```{r quiz} -->
<!-- quiz( -->
<!--   question("Which package contains functions for installing other R packages?", -->
<!--     answer("base"), -->
<!--     answer("tools"), -->
<!--     answer("utils", correct = TRUE), -->
<!--     answer("codetools") -->
<!--   ), -->
<!--   question("Which of the R packages listed below are used to create plots?", -->
<!--     answer("lattice", correct = TRUE), -->
<!--     answer("tools"), -->
<!--     answer("stats"), -->
<!--     answer("grid", correct = TRUE) -->
<!--   ) -->
<!-- ) -->
<!-- ``` -->
